"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(n,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.PubSub=t()}("object"===("undefined"==typeof window?"undefined":_typeof(window))&&window||void 0,function(){function n(n){var t;for(t in n)if(n.hasOwnProperty(t))return!0;return!1}function t(n){return function(){throw n}}function e(n,e,o){try{n(e,o)}catch(n){setTimeout(t(n),0)}}function o(n,t,e){n(t,e)}function r(n,t,r,i){var f,u=c[t],s=i?o:e;if(c.hasOwnProperty(t))for(f in u)u.hasOwnProperty(f)&&s(u[f],n,r)}function i(n,t,e){return function(){var o=String(n),i=o.lastIndexOf(".");for(r(n,n,t,e);i!==-1;)o=o.substr(0,i),i=o.lastIndexOf("."),r(n,o,t)}}function f(t){for(var e=String(t),o=Boolean(c.hasOwnProperty(e)&&n(c[e])),r=e.lastIndexOf(".");!o&&r!==-1;)e=e.substr(0,r),r=e.lastIndexOf("."),o=Boolean(c.hasOwnProperty(e)&&n(c[e]));return o}function u(n,t,e,o){var r=i(n,t,o),u=f(n);return!!u&&(e===!0?r():setTimeout(r,0),!0)}var s={},c={},y=-1;return s.publish=function(n,t){return u(n,t,!1,s.immediateExceptions)},s.publishSync=function(n,t){return u(n,t,!0,s.immediateExceptions)},s.subscribe=function(n,t){if("function"!=typeof t)return!1;c.hasOwnProperty(n)||(c[n]={});var e="uid_"+String(++y);return c[n][e]=t,e},s.unsubscribe=function(n){var t,e,o,r="string"==typeof n,i=!1;for(t in c)if(c.hasOwnProperty(t)){if(e=c[t],r&&e[n]){delete e[n],i=n;break}if(!r)for(o in e)e.hasOwnProperty(o)&&e[o]===n&&(delete e[o],i=!0)}return i},s});