"use strict";define(["knockout","pubsub","modules/player","modules/score","modules/persist","modules/round","modules/complete"],function(e,s,t,r,n,a,o){return function(){var i=this;i.players=e.observableArray([new t]),this.persist=new n(i),this.score=new r(i),this.round=new a(i),this.complete=new o(i),this.entryInProgress=!0,this.addPlayer=function(){i.players.push(new t)},this.removePlayer=function(e){e.currentScore()<1?i.players.remove(e):confirm("Are you sure you want to delete this player?")&&i.players.remove(e)},this.clearGame=function(){s.publish("game.clear",{}),i.persist.clearGameData(),ga("send","event","Game","New"),i.players(i.persist.loadGameData())},this.newGame=function(){i.players().length<1?i.clearGame(i.players()):confirm("Are you sure you want to clear this game and start over?")&&i.clearGame(i.players())},this.resetGame=function(e){(e===!0||confirm("Are you sure you want to clear all scores?"))&&(ga("send","event","Game","Reset Scores"),s.publish("game.reset",{}),i.persist.clearGameData())},this.gameInSetupMode=function(){return i.players()[0]&&!i.players()[0].name()||!i.score.topScore()},this.gameFirstView=function(){return i.players()[0]&&!i.players()[0].name()};var l=null;this.scoreBeingEntered=function(){i.entryInProgress=!0,l=setTimeout(function(){i.entryInProgress=!1},500)},this.centerGame=function(){i.entryInProgress||setTimeout(function(){window.scroll({top:document.getElementsByClassName("scoreboard__block")[0].offsetTop,left:0,behavior:"smooth"})},200)},this.tipsVisible=e.observable(!1),this.toggleUserHelp=function(){i.tipsVisible(!i.tipsVisible())},i.players.subscribe(i.persist.saveGameData),s.subscribe("perist.load",function(e,r){if(r.hasOwnProperty("players")){var n=r.players;for(var a in n)n[a]=new t(n[a]);i.players(n)}s.publish("game.ready",{})}),s.publish("game.load",i),[].forEach.call(document.getElementsByClassName("js-vote"),function(e){e.addEventListener("click",function(e){e.removeAttribute("onclick"),e.textContent="Thanks!"})})}});