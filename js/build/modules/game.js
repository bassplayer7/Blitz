"use strict";define(["knockout","pubsub","modules/player","modules/score","modules/persist","modules/round","modules/complete"],function(e,s,r,a,t,i,n){return function(){var o=this;o.players=e.observableArray([new r]),this.persist=new t(o),this.score=new a(o),this.round=new i(o),this.complete=new n(o),this.addPlayer=function(){o.players.push(new r)},this.removePlayer=function(e){e.currentScore()<1?o.players.remove(e):confirm("Are you sure you want to delete this player?")&&o.players.remove(e)},this.clearGame=function(){s.publish("game.clear",{}),o.persist.clearGameData(),ga("send","event","Game","New"),o.players(o.persist.loadGameData())},this.newGame=function(){o.players().length<1?o.clearGame(o.players()):confirm("Are you sure you want to clear this game and start over?")&&o.clearGame(o.players())},this.resetGame=function(e){(e===!0||confirm("Are you sure you want to clear all scores?"))&&(ga("send","event","Game","Reset Scores"),s.publish("game.reset",{}),o.persist.clearGameData())},this.gameInSetupMode=function(){return o.players()[0]&&!o.players()[0].name()||!o.score.topScore()},this.gameFirstView=function(){return o.players()[0]&&!o.players()[0].name()},this.tipsVisible=e.observable(!1),this.toggleUserHelp=function(){o.tipsVisible(!o.tipsVisible())},o.players.subscribe(o.persist.saveGameData),s.subscribe("perist.load",function(e,a){if(a.hasOwnProperty("players")){var t=a.players;for(var i in t)t[i]=new r(t[i]);o.players(t)}s.publish("game.ready",{})}),s.publish("game.load",o)}});